"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/users/route";
exports.ids = ["app/api/users/route"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = import("firebase-admin/firestore");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fkih%2FDocuments%2Ftest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkih%2FDocuments%2Ftest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fkih%2FDocuments%2Ftest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkih%2FDocuments%2Ftest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kih_Documents_test_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/users/route.ts */ \"(rsc)/./app/api/users/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_kih_Documents_test_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_kih_Documents_test_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/users/route\",\n        pathname: \"/api/users\",\n        filename: \"route\",\n        bundlePath: \"app/api/users/route\"\n    },\n    resolvedPagePath: \"/Users/kih/Documents/test/app/api/users/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kih_Documents_test_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/users/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdXNlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ1c2VycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmtpaCUyRkRvY3VtZW50cyUyRnRlc3QlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa2loJTJGRG9jdW1lbnRzJTJGdGVzdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDQTtBQUM3RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3B1cmNoYXNlLW9yZGVyLXRyYWNrZXIvPzIwODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2tpaC9Eb2N1bWVudHMvdGVzdC9hcHAvYXBpL3VzZXJzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2Vycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91c2Vycy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9raWgvRG9jdW1lbnRzL3Rlc3QvYXBwL2FwaS91c2Vycy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXNlcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fkih%2FDocuments%2Ftest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkih%2FDocuments%2Ftest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/users/route.ts":
/*!********************************!*\
  !*** ./app/api/users/route.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebaseAdmin */ \"(rsc)/./lib/firebaseAdmin.ts\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__]);\nfirebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n // 從 Admin SDK 引入 auth 和 firestore\n // 只保留 Timestamp\n// 創建新用戶文檔\nasync function POST(req) {\n    try {\n        // 1. 驗證 Firebase ID Token\n        const authHeader = req.headers.get(\"Authorization\");\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Authorization header missing or malformed\"\n            }, {\n                status: 401\n            });\n        }\n        const idToken = authHeader.split(\" \")[1];\n        console.log(\"Backend /api/users received ID Token:\", idToken);\n        const decodedToken = await _lib_firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__.auth.verifyIdToken(idToken);\n        console.log(\"Backend /api/users decoded Token:\", decodedToken);\n        const uid = decodedToken.uid;\n        const emailFromToken = decodedToken.email;\n        if (!emailFromToken) {\n            console.error(\"Backend /api/users - Email not found in decoded token\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Email not found in token\"\n            }, {\n                status: 400\n            });\n        }\n        // 2. 解析請求體\n        const body = await req.json(); // Use Partial if not all fields are guaranteed\n        console.log(\"Backend /api/users received body:\", body);\n        const { name, department, role } = body;\n        console.log(`Backend /api/users - Parsed from body: name='${name}', role='${role}', department='${department}'`);\n        if (!name || !role) {\n            console.error(`Backend /api/users - Missing fields from body: name=${name}, role=${role}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: `Missing required fields from body. Received: name=${name}, role=${role}`\n            }, {\n                status: 400\n            });\n        }\n        if (![\n            \"user\",\n            \"staff\",\n            \"admin\"\n        ].includes(role)) {\n            console.error(`Backend /api/users - Invalid role: ${role}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: `Invalid role value. Must be one of: user, staff, admin. Received: ${role}`\n            }, {\n                status: 400\n            });\n        }\n        const userDocRef = _lib_firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"users\").doc(uid);\n        const userDocSnapshot = await userDocRef.get();\n        if (userDocSnapshot.exists) {\n            console.warn(`Backend /api/users - User document already exists for UID: ${uid}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"User document already exists\"\n            }, {\n                status: 409\n            });\n        }\n        const now = firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now();\n        const userDataToSet = {\n            name,\n            email: emailFromToken,\n            role: role,\n            createdAt: now,\n            updatedAt: now\n        };\n        if (department !== undefined && department !== null && department.trim() !== \"\") {\n            userDataToSet.department = department;\n        }\n        console.log(`Backend /api/users - Preparing to set user data for UID ${uid}:`, userDataToSet);\n        await userDocRef.set(userDataToSet);\n        console.log(`Backend /api/users - User document created successfully for UID: ${uid}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"User document created successfully\",\n            userId: uid\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating user document:\", error); // General error log\n        if (error instanceof Error) {\n            // Log more specific Firestore errors if possible\n            console.error(\"Error details:\", error.details || error.message);\n            const errorCode = error.code;\n            if (errorCode === \"auth/argument-error\" || errorCode === \"auth/id-token-expired\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: \"Invalid or expired token\"\n                }, {\n                    status: 401\n                });\n            }\n            // Check for Firestore specific error patterns if needed, though the generic one below might cover it\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: `Internal Server Error: ${error.message}`\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Internal Server Error (Unknown Error Type)\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 獲取用戶資料\nasync function GET(req) {\n    try {\n        const authHeader = req.headers.get(\"Authorization\");\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Authorization header missing or malformed\"\n            }, {\n                status: 401\n            });\n        }\n        const idToken = authHeader.split(\" \")[1];\n        const decodedToken = await _lib_firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__.auth.verifyIdToken(idToken);\n        const uid = decodedToken.uid;\n        const userDoc = await _lib_firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"users\").doc(uid).get();\n        if (!userDoc.exists) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"User not found\"\n            }, {\n                status: 404\n            });\n        }\n        const userData = userDoc.data();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: userDoc.id,\n            ...userData,\n            // 將 Timestamp 轉換為 ISO 字串\n            createdAt: userData.createdAt instanceof firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp ? userData.createdAt.toDate().toISOString() : userData.createdAt,\n            updatedAt: userData.updatedAt instanceof firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp ? userData.updatedAt.toDate().toISOString() : userData.updatedAt\n        });\n    } catch (error) {\n        console.error(\"Error fetching user:\", error);\n        let errorMessage = \"Internal Server Error\";\n        let statusCode = 500;\n        if (error instanceof Error) {\n            const errorCode = error.code;\n            if (errorCode === \"auth/argument-error\" || errorCode === \"auth/id-token-expired\") {\n                errorMessage = \"Invalid or expired token\";\n                statusCode = 401;\n            } else {\n                errorMessage = error.message || errorMessage;\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: errorMessage\n        }, {\n            status: statusCode\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ25ELElBQUlELGNBQWMseUJBQXlCQSxjQUFjLHlCQUF5QjtnQkFDaEZTLGVBQWU7Z0JBQ2ZDLGFBQWE7WUFDZixPQUFPO2dCQUNMRCxlQUFlL0IsTUFBTVgsT0FBTyxJQUFJMEM7WUFDbEM7UUFDRjtRQUNBLE9BQU9yRCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVDLFNBQVMwQztRQUFhLEdBQUc7WUFBRXpDLFFBQVEwQztRQUFXO0lBQzNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdXJjaGFzZS1vcmRlci10cmFja2VyLy4vYXBwL2FwaS91c2Vycy9yb3V0ZS50cz83ZmIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBmaXJlc3RvcmUsIGF1dGggfSBmcm9tICdAL2xpYi9maXJlYmFzZUFkbWluJzsgLy8g5b6eIEFkbWluIFNESyDlvJXlhaUgYXV0aCDlkowgZmlyZXN0b3JlXG5pbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9maXJlc3RvcmUnOyAvLyDlj6rkv53nlZkgVGltZXN0YW1wXG5cbi8vIOWumue+qSBVc2VyRGF0YSDku4vpnaLvvIzkvb/nlKggRmlyZWJhc2UgVGltZXN0YW1wXG5pbnRlcmZhY2UgVXNlckRhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHJvbGU6ICd1c2VyJyB8ICdzdGFmZicgfCAnYWRtaW4nO1xuICBkZXBhcnRtZW50Pzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IFRpbWVzdGFtcDtcbiAgdXBkYXRlZEF0OiBUaW1lc3RhbXA7XG59XG5cbi8vIERlZmluZSBhIG1vcmUgc3BlY2lmaWMgdHlwZSBmb3Igd2hhdCdzIHdyaXR0ZW4gdG8gRmlyZXN0b3JlXG5pbnRlcmZhY2UgVXNlckRhdGFGb3JGaXJlc3RvcmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7IC8vIGVtYWlsIGZyb20gdG9rZW5cbiAgcm9sZTogJ3VzZXInIHwgJ3N0YWZmJyB8ICdhZG1pbic7XG4gIGRlcGFydG1lbnQ/OiBzdHJpbmc7IC8vIE9wdGlvbmFsIGZpZWxkXG4gIGNyZWF0ZWRBdDogVGltZXN0YW1wO1xuICB1cGRhdGVkQXQ6IFRpbWVzdGFtcDtcbn1cblxuLy8g5Ym15bu65paw55So5oi25paH5qqUXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gMS4g6amX6K2JIEZpcmViYXNlIElEIFRva2VuXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpO1xuICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdBdXRob3JpemF0aW9uIGhlYWRlciBtaXNzaW5nIG9yIG1hbGZvcm1lZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpZFRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xuICAgIGNvbnNvbGUubG9nKFwiQmFja2VuZCAvYXBpL3VzZXJzIHJlY2VpdmVkIElEIFRva2VuOlwiLCBpZFRva2VuKTsgXG5cbiAgICBjb25zdCBkZWNvZGVkVG9rZW4gPSBhd2FpdCBhdXRoLnZlcmlmeUlkVG9rZW4oaWRUb2tlbik7XG4gICAgY29uc29sZS5sb2coXCJCYWNrZW5kIC9hcGkvdXNlcnMgZGVjb2RlZCBUb2tlbjpcIiwgZGVjb2RlZFRva2VuKTsgXG4gICAgY29uc3QgdWlkID0gZGVjb2RlZFRva2VuLnVpZDsgXG4gICAgY29uc3QgZW1haWxGcm9tVG9rZW4gPSBkZWNvZGVkVG9rZW4uZW1haWw7IFxuXG4gICAgaWYgKCFlbWFpbEZyb21Ub2tlbikgeyAvLyBSb2J1c3QgY2hlY2sgZm9yIGVtYWlsIGZyb20gdG9rZW5cbiAgICAgICAgY29uc29sZS5lcnJvcignQmFja2VuZCAvYXBpL3VzZXJzIC0gRW1haWwgbm90IGZvdW5kIGluIGRlY29kZWQgdG9rZW4nKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIG5vdCBmb3VuZCBpbiB0b2tlbicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICAvLyAyLiDop6PmnpDoq4vmsYLpq5RcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKSBhcyBQYXJ0aWFsPFVzZXJEYXRhPjsgLy8gVXNlIFBhcnRpYWwgaWYgbm90IGFsbCBmaWVsZHMgYXJlIGd1YXJhbnRlZWRcbiAgICBjb25zb2xlLmxvZyhcIkJhY2tlbmQgL2FwaS91c2VycyByZWNlaXZlZCBib2R5OlwiLCBib2R5KTsgXG4gICAgY29uc3QgeyBuYW1lLCBkZXBhcnRtZW50LCByb2xlIH0gPSBib2R5OyBcbiAgICBjb25zb2xlLmxvZyhgQmFja2VuZCAvYXBpL3VzZXJzIC0gUGFyc2VkIGZyb20gYm9keTogbmFtZT0nJHtuYW1lfScsIHJvbGU9JyR7cm9sZX0nLCBkZXBhcnRtZW50PScke2RlcGFydG1lbnR9J2ApO1xuXG4gICAgaWYgKCFuYW1lIHx8ICFyb2xlKSB7IC8vIGVtYWlsIGlzIGZyb20gdG9rZW4sIHNvIG9ubHkgY2hlY2sgbmFtZSBhbmQgcm9sZSBmcm9tIGJvZHlcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEJhY2tlbmQgL2FwaS91c2VycyAtIE1pc3NpbmcgZmllbGRzIGZyb20gYm9keTogbmFtZT0ke25hbWV9LCByb2xlPSR7cm9sZX1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiBgTWlzc2luZyByZXF1aXJlZCBmaWVsZHMgZnJvbSBib2R5LiBSZWNlaXZlZDogbmFtZT0ke25hbWV9LCByb2xlPSR7cm9sZX1gIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIVsndXNlcicsICdzdGFmZicsICdhZG1pbiddLmluY2x1ZGVzKHJvbGUpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBCYWNrZW5kIC9hcGkvdXNlcnMgLSBJbnZhbGlkIHJvbGU6ICR7cm9sZX1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiBgSW52YWxpZCByb2xlIHZhbHVlLiBNdXN0IGJlIG9uZSBvZjogdXNlciwgc3RhZmYsIGFkbWluLiBSZWNlaXZlZDogJHtyb2xlfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModWlkKTtcbiAgICBjb25zdCB1c2VyRG9jU25hcHNob3QgPSBhd2FpdCB1c2VyRG9jUmVmLmdldCgpO1xuXG4gICAgaWYgKHVzZXJEb2NTbmFwc2hvdC5leGlzdHMpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBCYWNrZW5kIC9hcGkvdXNlcnMgLSBVc2VyIGRvY3VtZW50IGFscmVhZHkgZXhpc3RzIGZvciBVSUQ6ICR7dWlkfWApO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkb2N1bWVudCBhbHJlYWR5IGV4aXN0cycgfSwgeyBzdGF0dXM6IDQwOSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBUaW1lc3RhbXAubm93KCk7IFxuXG4gICAgY29uc3QgdXNlckRhdGFUb1NldDogVXNlckRhdGFGb3JGaXJlc3RvcmUgPSB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWw6IGVtYWlsRnJvbVRva2VuLFxuICAgICAgcm9sZTogcm9sZSBhcyAndXNlcicgfCAnc3RhZmYnIHwgJ2FkbWluJywgXG4gICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgIHVwZGF0ZWRBdDogbm93LFxuICAgIH07XG5cbiAgICBpZiAoZGVwYXJ0bWVudCAhPT0gdW5kZWZpbmVkICYmIGRlcGFydG1lbnQgIT09IG51bGwgJiYgZGVwYXJ0bWVudC50cmltKCkgIT09ICcnKSB7IC8vIE9ubHkgYWRkIGRlcGFydG1lbnQgaWYgaXQncyBhIG1lYW5pbmdmdWwgc3RyaW5nXG4gICAgICB1c2VyRGF0YVRvU2V0LmRlcGFydG1lbnQgPSBkZXBhcnRtZW50O1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgQmFja2VuZCAvYXBpL3VzZXJzIC0gUHJlcGFyaW5nIHRvIHNldCB1c2VyIGRhdGEgZm9yIFVJRCAke3VpZH06YCwgdXNlckRhdGFUb1NldCk7XG4gICAgYXdhaXQgdXNlckRvY1JlZi5zZXQodXNlckRhdGFUb1NldCk7IFxuICAgIGNvbnNvbGUubG9nKGBCYWNrZW5kIC9hcGkvdXNlcnMgLSBVc2VyIGRvY3VtZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IGZvciBVSUQ6ICR7dWlkfWApO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgZG9jdW1lbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCB1c2VySWQ6IHVpZCB9LCB7IHN0YXR1czogMjAxIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIHVzZXIgZG9jdW1lbnQ6XCIsIGVycm9yKTsgLy8gR2VuZXJhbCBlcnJvciBsb2dcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAvLyBMb2cgbW9yZSBzcGVjaWZpYyBGaXJlc3RvcmUgZXJyb3JzIGlmIHBvc3NpYmxlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZXRhaWxzOlwiLCAoZXJyb3IgYXMgYW55KS5kZXRhaWxzIHx8IGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBjb25zdCBlcnJvckNvZGUgPSAoZXJyb3IgYXMgeyBjb2RlPzogc3RyaW5nIH0pLmNvZGU7XG4gICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdhdXRoL2FyZ3VtZW50LWVycm9yJyB8fCBlcnJvckNvZGUgPT09ICdhdXRoL2lkLXRva2VuLWV4cGlyZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgICAgICB9XG4gICAgICAgICAvLyBDaGVjayBmb3IgRmlyZXN0b3JlIHNwZWNpZmljIGVycm9yIHBhdHRlcm5zIGlmIG5lZWRlZCwgdGhvdWdoIHRoZSBnZW5lcmljIG9uZSBiZWxvdyBtaWdodCBjb3ZlciBpdFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBgSW50ZXJuYWwgU2VydmVyIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yIChVbmtub3duIEVycm9yIFR5cGUpJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIOeNsuWPlueUqOaItuizh+aWmVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpO1xuICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdBdXRob3JpemF0aW9uIGhlYWRlciBtaXNzaW5nIG9yIG1hbGZvcm1lZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpZFRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xuICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IGF3YWl0IGF1dGgudmVyaWZ5SWRUb2tlbihpZFRva2VuKTtcbiAgICBjb25zdCB1aWQgPSBkZWNvZGVkVG9rZW4udWlkO1xuXG4gICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyh1aWQpLmdldCgpO1xuXG4gICAgaWYgKCF1c2VyRG9jLmV4aXN0cykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCkgYXMgVXNlckRhdGE7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGlkOiB1c2VyRG9jLmlkLFxuICAgICAgLi4udXNlckRhdGEsXG4gICAgICAvLyDlsIcgVGltZXN0YW1wIOi9ieaPm+eCuiBJU08g5a2X5LiyXG4gICAgICBjcmVhdGVkQXQ6IHVzZXJEYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIFRpbWVzdGFtcCBcbiAgICAgICAgPyB1c2VyRGF0YS5jcmVhdGVkQXQudG9EYXRlKCkudG9JU09TdHJpbmcoKSBcbiAgICAgICAgOiB1c2VyRGF0YS5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHVzZXJEYXRhLnVwZGF0ZWRBdCBpbnN0YW5jZW9mIFRpbWVzdGFtcCBcbiAgICAgICAgPyB1c2VyRGF0YS51cGRhdGVkQXQudG9EYXRlKCkudG9JU09TdHJpbmcoKSBcbiAgICAgICAgOiB1c2VyRGF0YS51cGRhdGVkQXQsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHVzZXI6XCIsIGVycm9yKTtcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ0ludGVybmFsIFNlcnZlciBFcnJvcic7XG4gICAgbGV0IHN0YXR1c0NvZGUgPSA1MDA7XG5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JDb2RlID0gKGVycm9yIGFzIHsgY29kZT86IHN0cmluZyB9KS5jb2RlO1xuICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ2F1dGgvYXJndW1lbnQtZXJyb3InIHx8IGVycm9yQ29kZSA9PT0gJ2F1dGgvaWQtdG9rZW4tZXhwaXJlZCcpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbic7XG4gICAgICAgIHN0YXR1c0NvZGUgPSA0MDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8IGVycm9yTWVzc2FnZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogZXJyb3JNZXNzYWdlIH0sIHsgc3RhdHVzOiBzdGF0dXNDb2RlIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZmlyZXN0b3JlIiwiYXV0aCIsIlRpbWVzdGFtcCIsIlBPU1QiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsImlkVG9rZW4iLCJzcGxpdCIsImNvbnNvbGUiLCJsb2ciLCJkZWNvZGVkVG9rZW4iLCJ2ZXJpZnlJZFRva2VuIiwidWlkIiwiZW1haWxGcm9tVG9rZW4iLCJlbWFpbCIsImVycm9yIiwiYm9keSIsIm5hbWUiLCJkZXBhcnRtZW50Iiwicm9sZSIsImluY2x1ZGVzIiwidXNlckRvY1JlZiIsImNvbGxlY3Rpb24iLCJkb2MiLCJ1c2VyRG9jU25hcHNob3QiLCJleGlzdHMiLCJ3YXJuIiwibm93IiwidXNlckRhdGFUb1NldCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInVuZGVmaW5lZCIsInRyaW0iLCJzZXQiLCJ1c2VySWQiLCJFcnJvciIsImRldGFpbHMiLCJlcnJvckNvZGUiLCJjb2RlIiwiR0VUIiwidXNlckRvYyIsInVzZXJEYXRhIiwiZGF0YSIsImlkIiwidG9EYXRlIiwidG9JU09TdHJpbmciLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/users/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/firebaseAdmin.ts":
/*!******************************!*\
  !*** ./lib/firebaseAdmin.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   firestore: () => (/* binding */ firestore),\n/* harmony export */   getFirebaseAuth: () => (/* binding */ getFirebaseAuth),\n/* harmony export */   getFirestoreDatabase: () => (/* binding */ getFirestoreDatabase)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\n// 使用一個變數來存儲 Firestore 實例，以避免重複創建\nlet firestore;\nlet auth;\nconsole.log(\"Attempting to initialize Firebase Admin SDK...\");\nconsole.log(\"Current NODE_ENV:\", \"development\");\nconsole.log(\"FIREBASE_PROJECT_ID (admin):\", process.env.FIREBASE_PROJECT_ID);\nconsole.log(\"FIREBASE_CLIENT_EMAIL (admin):\", process.env.FIREBASE_CLIENT_EMAIL);\n// 不要在日誌中輸出完整的 privateKey，但可以檢查它是否存在\nconsole.log(\"FIREBASE_PRIVATE_KEY (admin) exists:\", !!process.env.FIREBASE_PRIVATE_KEY);\nif (!firebase_admin__WEBPACK_IMPORTED_MODULE_0__.apps.length) {\n    try {\n        const serviceAccount = {\n            projectId: process.env.FIREBASE_PROJECT_ID,\n            clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n            privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\\\\\n/g, \"\\n\")\n        };\n        // 檢查憑證物件是否基本完整\n        if (!serviceAccount.projectId || !serviceAccount.clientEmail || !serviceAccount.privateKey) {\n            console.error(\"Firebase Admin SDK Error: Missing required service account properties (projectId, clientEmail, or privateKey) in environment variables.\");\n            throw new Error(\"Missing required service account properties for Firebase Admin SDK.\");\n        }\n        firebase_admin__WEBPACK_IMPORTED_MODULE_0__.initializeApp({\n            credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0__.credential.cert(serviceAccount)\n        });\n        console.log(\"Firebase Admin SDK initialized successfully using service account.\");\n        firestore = firebase_admin__WEBPACK_IMPORTED_MODULE_0__.firestore();\n        auth = firebase_admin__WEBPACK_IMPORTED_MODULE_0__.auth();\n    } catch (error) {\n        console.error(\"Firebase admin initialization error:\", error);\n        // 可以在這裡檢查 error 物件的詳細內容，例如 error.errorInfo\n        if (error instanceof Error && error.errorInfo) {\n            console.error(\"Firebase Admin SDK Initialization Error Info:\", error.errorInfo);\n        }\n        throw new Error(\"Failed to initialize Firebase Admin SDK.\");\n    }\n} else {\n    // 如果 admin.apps.length > 0，表示已經初始化過了\n    // 獲取已存在的實例\n    const existingApp = firebase_admin__WEBPACK_IMPORTED_MODULE_0__.app();\n    firestore = existingApp.firestore();\n    auth = existingApp.auth();\n    console.log(\"Firebase Admin SDK already initialized.\");\n}\n// 導出常用的服務實例\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (firebase_admin__WEBPACK_IMPORTED_MODULE_0__); // 導出 admin 物件本身（如果需要其他服務）\n// 獲取 Auth 服務的函數（提供一個訪問點，儘管直接導出也很常見）\nfunction getFirebaseAuth() {\n    return auth; // 返回已初始化的 auth 實例\n}\n// 獲取 Firestore 服務的函數（提供一個訪問點，儘管直接導出也很常見）\nfunction getFirestoreDatabase() {\n    return firestore; // 返回已初始化的 firestore 實例\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZmlyZWJhc2VBZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdDO0FBRXhDLGlDQUFpQztBQUNqQyxJQUFJQztBQUNKLElBQUlDO0FBRUpDLFFBQVFDLEdBQUcsQ0FBQztBQUNaRCxRQUFRQyxHQUFHLENBQUMscUJBUFo7QUFRQUQsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0MsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUI7QUFDM0VKLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NDLFFBQVFDLEdBQUcsQ0FBQ0UscUJBQXFCO0FBQy9FLG9DQUFvQztBQUNwQ0wsUUFBUUMsR0FBRyxDQUFDLHdDQUF3QyxDQUFDLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO0FBRXRGLElBQUksQ0FBQ1QsZ0RBQVUsQ0FBQ1csTUFBTSxFQUFFO0lBQ3RCLElBQUk7UUFDRixNQUFNQyxpQkFBaUI7WUFDckJDLFdBQVdSLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CO1lBQzFDTyxhQUFhVCxRQUFRQyxHQUFHLENBQUNFLHFCQUFxQjtZQUM5Q08sWUFBWVYsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0IsRUFBRU8sUUFBUSxVQUFVO1FBQ2xFO1FBRUEsZUFBZTtRQUNmLElBQUksQ0FBQ0osZUFBZUMsU0FBUyxJQUFJLENBQUNELGVBQWVFLFdBQVcsSUFBSSxDQUFDRixlQUFlRyxVQUFVLEVBQUU7WUFDMUZaLFFBQVFjLEtBQUssQ0FBQztZQUNkLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtRQUVBbEIseURBQW1CLENBQUM7WUFDbEJvQixZQUFZcEIsc0RBQWdCLENBQUNxQixJQUFJLENBQUNUO1FBR3BDO1FBRUFULFFBQVFDLEdBQUcsQ0FBQztRQUVaSCxZQUFZRCxxREFBZTtRQUMzQkUsT0FBT0YsZ0RBQVU7SUFFbkIsRUFBRSxPQUFPaUIsT0FBZ0I7UUFDdkJkLFFBQVFjLEtBQUssQ0FBQyx3Q0FBd0NBO1FBQ3RELDJDQUEyQztRQUMzQyxJQUFJQSxpQkFBaUJDLFNBQVMsTUFBZUksU0FBUyxFQUFFO1lBQ3BEbkIsUUFBUWMsS0FBSyxDQUFDLGlEQUFpRCxNQUFlSyxTQUFTO1FBQzNGO1FBQ0EsTUFBTSxJQUFJSixNQUFNO0lBQ2xCO0FBQ0YsT0FBTztJQUNMLHFDQUFxQztJQUNyQyxXQUFXO0lBQ1gsTUFBTUssY0FBY3ZCLCtDQUFTO0lBQzdCQyxZQUFZc0IsWUFBWXRCLFNBQVM7SUFDakNDLE9BQU9xQixZQUFZckIsSUFBSTtJQUN2QkMsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFHQSxZQUFZO0FBQ2U7QUFDM0IsaUVBQWVKLDJDQUFLQSxFQUFDLENBQUMsMEJBQTBCO0FBRWhELG9DQUFvQztBQUM3QixTQUFTeUI7SUFDZCxPQUFPdkIsTUFBTSxrQkFBa0I7QUFDakM7QUFFQSx5Q0FBeUM7QUFDbEMsU0FBU3dCO0lBQ2QsT0FBT3pCLFdBQVcsdUJBQXVCO0FBQzNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVyY2hhc2Utb3JkZXItdHJhY2tlci8uL2xpYi9maXJlYmFzZUFkbWluLnRzPzE3MWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYWRtaW4gZnJvbSAnZmlyZWJhc2UtYWRtaW4nO1xuXG4vLyDkvb/nlKjkuIDlgIvorormlbjkvoblrZjlhLIgRmlyZXN0b3JlIOWvpuS+i++8jOS7pemBv+WFjemHjeikh+WJteW7ulxubGV0IGZpcmVzdG9yZTogYWRtaW4uZmlyZXN0b3JlLkZpcmVzdG9yZTtcbmxldCBhdXRoOiBhZG1pbi5hdXRoLkF1dGg7XG5cbmNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyB0byBpbml0aWFsaXplIEZpcmViYXNlIEFkbWluIFNESy4uLlwiKTtcbmNvbnNvbGUubG9nKFwiQ3VycmVudCBOT0RFX0VOVjpcIiwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYpO1xuY29uc29sZS5sb2coXCJGSVJFQkFTRV9QUk9KRUNUX0lEIChhZG1pbik6XCIsIHByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQpO1xuY29uc29sZS5sb2coXCJGSVJFQkFTRV9DTElFTlRfRU1BSUwgKGFkbWluKTpcIiwgcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMKTtcbi8vIOS4jeimgeWcqOaXpeiqjOS4rei8uOWHuuWujOaVtOeahCBwcml2YXRlS2V577yM5L2G5Y+v5Lul5qqi5p+l5a6D5piv5ZCm5a2Y5ZyoXG5jb25zb2xlLmxvZyhcIkZJUkVCQVNFX1BSSVZBVEVfS0VZIChhZG1pbikgZXhpc3RzOlwiLCAhIXByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZKTtcblxuaWYgKCFhZG1pbi5hcHBzLmxlbmd0aCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlcnZpY2VBY2NvdW50ID0ge1xuICAgICAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lELFxuICAgICAgY2xpZW50RW1haWw6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCxcbiAgICAgIHByaXZhdGVLZXk6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZPy5yZXBsYWNlKC9cXFxcXFxcXG4vZywgJ1xcbicpLFxuICAgIH07XG5cbiAgICAvLyDmqqLmn6XmhpHorYnnianku7bmmK/lkKbln7rmnKzlrozmlbRcbiAgICBpZiAoIXNlcnZpY2VBY2NvdW50LnByb2plY3RJZCB8fCAhc2VydmljZUFjY291bnQuY2xpZW50RW1haWwgfHwgIXNlcnZpY2VBY2NvdW50LnByaXZhdGVLZXkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpcmViYXNlIEFkbWluIFNESyBFcnJvcjogTWlzc2luZyByZXF1aXJlZCBzZXJ2aWNlIGFjY291bnQgcHJvcGVydGllcyAocHJvamVjdElkLCBjbGllbnRFbWFpbCwgb3IgcHJpdmF0ZUtleSkgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIHNlcnZpY2UgYWNjb3VudCBwcm9wZXJ0aWVzIGZvciBGaXJlYmFzZSBBZG1pbiBTREsuJyk7XG4gICAgfVxuXG4gICAgYWRtaW4uaW5pdGlhbGl6ZUFwcCh7XG4gICAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoc2VydmljZUFjY291bnQpLFxuICAgICAgLy8g5oKo5Lmf5Y+v5Lul5Zyo6YCZ6KOh5piO56K65oyH5a6aIGRhdGFiYXNlVVJMIOWmguaenOmcgOimge+8jOS9humAmuW4uCBjcmVkZW50aWFsIOi2s+WkoFxuICAgICAgLy8gZGF0YWJhc2VVUkw6IGBodHRwczovLyR7cHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRH0uZmlyZWJhc2Vpby5jb21gXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIkZpcmViYXNlIEFkbWluIFNESyBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkgdXNpbmcgc2VydmljZSBhY2NvdW50LlwiKTtcblxuICAgIGZpcmVzdG9yZSA9IGFkbWluLmZpcmVzdG9yZSgpO1xuICAgIGF1dGggPSBhZG1pbi5hdXRoKCk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zb2xlLmVycm9yKCdGaXJlYmFzZSBhZG1pbiBpbml0aWFsaXphdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgLy8g5Y+v5Lul5Zyo6YCZ6KOh5qqi5p+lIGVycm9yIOeJqeS7tueahOips+e0sOWFp+Wuue+8jOS+i+WmgiBlcnJvci5lcnJvckluZm9cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAoZXJyb3IgYXMgYW55KS5lcnJvckluZm8pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmlyZWJhc2UgQWRtaW4gU0RLIEluaXRpYWxpemF0aW9uIEVycm9yIEluZm86JywgKGVycm9yIGFzIGFueSkuZXJyb3JJbmZvKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgRmlyZWJhc2UgQWRtaW4gU0RLLlwiKTtcbiAgfVxufSBlbHNlIHtcbiAgLy8g5aaC5p6cIGFkbWluLmFwcHMubGVuZ3RoID4gMO+8jOihqOekuuW3sue2k+WIneWni+WMlumBjuS6hlxuICAvLyDnjbLlj5blt7LlrZjlnKjnmoTlr6bkvotcbiAgY29uc3QgZXhpc3RpbmdBcHAgPSBhZG1pbi5hcHAoKTtcbiAgZmlyZXN0b3JlID0gZXhpc3RpbmdBcHAuZmlyZXN0b3JlKCk7XG4gIGF1dGggPSBleGlzdGluZ0FwcC5hdXRoKCk7XG4gIGNvbnNvbGUubG9nKFwiRmlyZWJhc2UgQWRtaW4gU0RLIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpO1xufVxuXG5cbi8vIOWwjuWHuuW4uOeUqOeahOacjeWLmeWvpuS+i1xuZXhwb3J0IHsgZmlyZXN0b3JlLCBhdXRoIH07XG5leHBvcnQgZGVmYXVsdCBhZG1pbjsgLy8g5bCO5Ye6IGFkbWluIOeJqeS7tuacrOi6q++8iOWmguaenOmcgOimgeWFtuS7luacjeWLme+8iVxuXG4vLyDnjbLlj5YgQXV0aCDmnI3li5nnmoTlh73mlbjvvIjmj5DkvpvkuIDlgIvoqKrllY/pu57vvIzlhJjnrqHnm7TmjqXlsI7lh7rkuZ/lvojluLjopovvvIlcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXJlYmFzZUF1dGgoKSB7XG4gIHJldHVybiBhdXRoOyAvLyDov5Tlm57lt7LliJ3lp4vljJbnmoQgYXV0aCDlr6bkvotcbn1cblxuLy8g542y5Y+WIEZpcmVzdG9yZSDmnI3li5nnmoTlh73mlbjvvIjmj5DkvpvkuIDlgIvoqKrllY/pu57vvIzlhJjnrqHnm7TmjqXlsI7lh7rkuZ/lvojluLjopovvvIlcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXJlc3RvcmVEYXRhYmFzZSgpIHtcbiAgcmV0dXJuIGZpcmVzdG9yZTsgLy8g6L+U5Zue5bey5Yid5aeL5YyW55qEIGZpcmVzdG9yZSDlr6bkvotcbn1cbiJdLCJuYW1lcyI6WyJhZG1pbiIsImZpcmVzdG9yZSIsImF1dGgiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJGSVJFQkFTRV9QUklWQVRFX0tFWSIsImFwcHMiLCJsZW5ndGgiLCJzZXJ2aWNlQWNjb3VudCIsInByb2plY3RJZCIsImNsaWVudEVtYWlsIiwicHJpdmF0ZUtleSIsInJlcGxhY2UiLCJlcnJvciIsIkVycm9yIiwiaW5pdGlhbGl6ZUFwcCIsImNyZWRlbnRpYWwiLCJjZXJ0IiwiZXJyb3JJbmZvIiwiZXhpc3RpbmdBcHAiLCJhcHAiLCJnZXRGaXJlYmFzZUF1dGgiLCJnZXRGaXJlc3RvcmVEYXRhYmFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/firebaseAdmin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fkih%2FDocuments%2Ftest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkih%2FDocuments%2Ftest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();